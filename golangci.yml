# Конфигурация golangci-lint для проекта zntfaker

run:
  tests: true  # запускать линтеры на тестах
  build-tags:
    - bench    # теги для бенчмарков
    - !bench   # исключить бенчмарки

linters-settings:
  # Максимальная длина функции: 150 строк, 80 statements
  funlen:
    lines: 150
    statements: 80
  
  # Контроль зависимостей
  depguard:
    rules:
      Main:
        files:
          - $all
          - "!$test"
        allow:
          - $gostd  # только стандартная библиотека Go
      Test:
        files:
          - $test
        allow:
          - $gostd  # в тестах тоже только stdlib

# Исключения для определенных файлов или правил
issues:
  exclude-rules:
    # Для тестов отключаем некоторые строгие проверки
    - path: _test\.go
      linters:
        - errcheck    # в тестах можно игнорировать ошибки
        - dupl        # допускаем дублирование в тестах
        - gocyclo     # тесты могут быть сложными
        - gosec       # не проверяем тесты на безопасность

# Список включенных линтеров
linters:
  disable-all: true  # отключаем все по умолчанию
  enable:
    # === ФОРМАТИРОВАНИЕ И СТИЛЬ ===
    - asciicheck       # проверка на использование только ASCII символов
    - gci              # сортировка импортов
    - godot            # проверка точек в комментариях
    - gofmt            # форматирование кода (gofmt)
    - gofumpt          # более строгое форматирование
    - goheader         # проверка заголовков файлов
    - goprintffuncname # имена Printf-подобных функций
    - lll              # максимальная длина строки (по умолчанию 80)
    - misspell         # проверка орфографии
    - nolintlint       # проверка корректности директив nolint
    - tagliatelle      # проверка тегов структур (json, yaml и т.д.)
    - whitespace       # лишние пробелы и пустые строки
    
    # === ИМЕНОВАНИЕ И ДОКУМЕНТАЦИЯ ===
    - revive           # комплексный линтер стиля (замена golint)
    - stylecheck       # проверка стиля кода
    
    # === СЛОЖНОСТЬ КОДА ===
    - funlen           # проверка длины функций
    - gocognit         # когнитивная сложность функций
    - gocyclo          # цикломатическая сложность
    - nestif           # слишком вложенные if-else
    
    # === КАЧЕСТВО КОДА ===
    - depguard         # контроль импортов и зависимостей
    - dogsled          # слишком много пустых идентификаторов (_)
    - dupl             # поиск дублирующегося кода
    - goconst          # поиск магических чисел и строк
    - gocritic         # сборник критических замечаний к коду
    - predeclared      # переопределение встроенных идентификаторов
    
    # === БЕЗОПАСНОСТЬ ===
    - gosec            # статический анализатор безопасности
    
    # === ОПТИМИЗАЦИЯ И ПРОИЗВОДИТЕЛЬНОСТЬ ===
    - copyloopvar      # копирование переменных цикла в замыканиях
    - durationcheck    # проверка правильности использования time.Duration
    - makezero         # make с нулевой длиной
    - prealloc         # предвыделение памяти для срезов
    - unconvert        # ненужные преобразования типов
    
    # === ОБРАБОТКА ОШИБОК И РЕСУРСОВ ===
    - bodyclose        # проверка закрытия HTTP response body
    - errorlint        # линтер для работы с ошибками
    - nilerr           # возврат nil ошибок
    - noctx            # функции должны принимать context.Context
    - unparam          # неиспользуемые параметры функций
    
    # === ПОЛНОТА И КОРРЕКТНОСТЬ ===
    - exhaustive       # проверка полноты switch/case выражений
    - thelper          # проверка хелперов в тестах
    - importas         # проверка алиасов импортов
    
    # === БАЗОВЫЕ ЛИНТЕРЫ (ОБЯЗАТЕЛЬНЫЕ) ===
    - errcheck         # проверка обработки ошибок
    - govet            # официальный анализатор Go (go vet)
    - staticcheck      # статический анализатор кода
    - typecheck        # проверка типов
    - ineffassign      # неэффективные присваивания
    - unused           # неиспользуемый код
    - gosimple         # упрощение кода